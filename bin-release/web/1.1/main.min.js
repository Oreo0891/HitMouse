var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function s(s){t.call(i,s,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?s(r):RES.getResAsync(e,s,this)}else RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var Counter=function(e){function t(){e.call(this),this.fullTime=4,this.timeContainer=new egret.Sprite,this.time1=Main.createBitmapByName("img15_png"),this.time2=Main.createBitmapByName("img14_png"),this.time3=Main.createBitmapByName("img13_png"),this.time4=Main.createBitmapByName("img12_png"),this.skinName="resource/assets/Skins/Srd.exml",this.timer1=new egret.Timer(1e3,0),this.timer1.addEventListener(egret.TimerEvent.TIMER,this.showTime,this),this.timer1.start()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.showTime=function(){this.addChild(this.timeContainer),this.timeContainer.x=300,this.timeContainer.y=300,this.countTime()},s.countTime=function(){this.fullTime--,console.log(this.fullTime),3==this.fullTime?this.timeContainer.addChild(this.time1):2==this.fullTime?(this.timeContainer.addChild(this.time2),this.timeContainer.removeChild(this.time1)):1==this.fullTime?(this.timeContainer.addChild(this.time3),this.timeContainer.removeChild(this.time2)):0==this.fullTime?(this.timeContainer.addChild(this.time4),this.timeContainer.removeChild(this.time3)):(this.timer1.stop(),this.startGame())},s.startGame=function(){var e=new Surroundings;this.parent.addChild(e),this.parent.removeChild(this)},t}(eui.Component);egret.registerClass(Counter,"Counter");var GameOver=function(e){function t(){e.call(this),this.skinName="resource/assets/Skins/Endpage.exml",this.reStartBtn(),this.showYourScore()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.showYourScore=function(){var e=new egret.TextField;e.x=250,e.y=350,e.size=40,e.text="你的得分为:"+parseInt(+Scores.gameScore+""),this.addChild(e)},s.reStartBtn=function(){var e=Main.createBitmapByName("img24_png");e.x=300,e.y=400,this.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reStart,this)},s.reStart=function(){var e=new Counter;this.parent.addChild(e),this.parent.removeChild(this)},t}(eui.Component);egret.registerClass(GameOver,"GameOver");var Hammer=function(e){function t(){e.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.Hitit,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.Hitit=function(e){var t=this,i=Main.createBitmapByName("ham_pic");this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){t.addChild(i),i.touchEnabled=!1,i.x=e.stageX+.6*i.width,i.y=e.stageY-.2*i.height,i.anchorOffsetX=.8*i.width,i.anchorOffsetY=.8*i.height,egret.Tween.get(i).to({rotation:-40},300,egret.Ease.backInOut).call(function(){i.rotation=40,i.parent&&i.parent.removeChild(i)},t)},this)},t}(egret.Sprite);egret.registerClass(Hammer,"Hammer");var HelperPage=function(e){function t(){e.call(this),this.skinName="resource/assets/Skins/Helppage.exml",this.backToMenu()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.backToMenu=function(){var e=Main.createBitmapByName("img28_png");e.x=300,e.y=380,this.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changePage,this)},s.changePage=function(){var e=new IndexPage;this.parent.addChild(e),this.parent.removeChild(this)},t}(eui.Component);egret.registerClass(HelperPage,"HelperPage");var Holes=function(e){function t(){e.call(this),this.place=[[140,260],[330,260],[530,265],[110,350],[330,350],[530,350],[105,450],[330,455],[550,455]],this.makeHoles()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.makeHoles=function(){this.holes=new Array;for(var e=0;e<this.place.length;e++){var t=new egret.Sprite;t.x=this.place[e][0],t.y=this.place[e][1],this.addChild(t),this.holes.push(t)}},s.getHole=function(e){return this.holes[e]},t}(egret.Sprite);egret.registerClass(Holes,"Holes");var IndexPage=function(e){function t(){e.call(this),this.skinName="resource/assets/Skins/Mainpage.exml",this.showbutton1(),this.showbutton2(),this.showbutton3()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.showbutton1=function(){var e=Main.createBitmapByName("img22_png");e.x=493,e.y=230,this.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this)},s.startGame=function(){var e=new Counter;this.parent.addChild(e),this.parent.removeChild(this)},s.showbutton2=function(){var e=Main.createBitmapByName("img20_png");e.x=493,e.y=320,this.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.askHelp,this)},s.askHelp=function(){var e=new HelperPage;this.parent.addChild(e),this.parent.removeChild(this)},s.showbutton3=function(){var e=Main.createBitmapByName("img26_png");e.x=493,e.y=410,this.addChild(e)},t}(eui.Component);egret.registerClass(IndexPage,"IndexPage");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},s.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},s.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},s.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},s.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},s.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},s.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},s.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},s.startCreateScene=function(){var e=new IndexPage;this.addChild(e)},t.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(eui.UILayer);egret.registerClass(Main,"Main");var Mouse=function(e){function t(t){e.call(this),this.type=t,this.mouseContainer=new egret.Sprite,this.createMouse(),this.addChild(this.mouseContainer)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createMouse=function(){this.tempmouse=Main.createBitmapByName("mouse"+this.type+"_png"),this.mouseContainer.addChild(this.tempmouse),egret.Tween.get(this.mouseContainer).to({y:this.mouseContainer.y-100},1e3,egret.Ease.cubicInOut).wait(1e3).to({y:this.mouseContainer.y},1e3,egret.Ease.cubicInOut).call(function(e){e&&e.parent&&(e.parent.removeChild(e),e=null)},this.mouseContainer,[this]);var e=new egret.Shape;e.graphics.beginFill(16777215,1),e.graphics.drawCircle(this.tempmouse.x+60,this.tempmouse.y-70,80),e.graphics.endFill(),this.addChild(e),this.tempmouse.mask=e},s.beHit=function(){this.tempmouse&&this.tempmouse.parent&&(this.tempmouse.parent.removeChild(this.tempmouse),this.tempmouse=null),this.tempmouse=Main.createBitmapByName("mouse_"+this.type+"_png"),this.tempmouse.y+=100,this.mouseContainer.addChild(this.tempmouse),egret.Tween.get(this.tempmouse).to({y:this.tempmouse.y-100},0,egret.Ease.cubicInOut).wait(1e3).to({y:this.tempmouse.y-100},1e3,egret.Ease.cubicInOut).call(function(e){e&&e.parent&&(e.parent.removeChild(e),e=null)},this.mouseContainer,[this]);var e=new egret.Shape;e.graphics.beginFill(16777215,1),e.graphics.drawCircle(this.tempmouse.x+60,this.tempmouse.y-160,80),e.graphics.endFill(),this.addChild(e),this.tempmouse.mask=e},t}(egret.Sprite);egret.registerClass(Mouse,"Mouse");var Scores=function(e){function t(){e.call(this);var t=Main.createBitmapByName("icon_25_png");t.x=350,t.y=150,this.addChild(t)}__extends(t,e);var i=(__define,t);i.prototype;return t}(egret.Sprite);egret.registerClass(Scores,"Scores");var Surroundings=function(e){function t(){e.call(this),this.addScore=0,this.scoreNum=new egret.TextField,this.skinName="resource/assets/Skins/Srd.exml";var t=new Scores;this.addChild(t),this.myhole=new Holes,this.addChild(this.myhole),this.repeatDo();var i=new Hammer;this.addChild(i);var s=new Time;this.addChild(s)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.radIdx=function(){var e=Math.floor(9*Math.random());return e},s.outMouse=function(){var e=this,t=this.radIdx(),i=this.myhole.getHole(t);if(0==i.numChildren){var s=Math.floor(5*Math.random())+1,r=new Mouse(s);r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(i){e.bResult=e.hitTestPoint(i.stageX,i.stageY,!1),e.bResult&&(r.touchEnabled=!1,r.derection=t,r.state=1,r.beHit(),e.showScore(s),e.showAddScore(r,s))},this),i.addChild(r)}else this.outMouse()},s.repeatDo=function(){var e=new egret.Timer(1e3,0);e.addEventListener(egret.TimerEvent.TIMER,this.outMouse,this),e.start()},s.showScore=function(e){1==e?this.addScore=1.2*this.addScore:2==e?this.addScore=this.addScore+100:3==e?this.addScore=this.addScore+500:4==e?this.addScore=this.addScore-100:5==e&&(this.addScore=this.addScore/2),this.addScore<=0&&(this.addScore=0),this.scoreNum.text=parseInt(this.addScore+"")+"",this.addChild(this.scoreNum),this.scoreNum.x=425,this.scoreNum.y=150,Scores.gameScore=this.addScore},s.showAddScore=function(e,t){this.changeScore=Main.createBitmapByName("score"+t+"_png");var i=this.myhole.getHole(e.derection);i.addChild(this.changeScore),egret.Tween.get(this.changeScore).to({y:this.changeScore.y-30},700,egret.Ease.cubicInOut).wait(700).call(function(e){e&&e.parent&&(e.parent.removeChild(e),e=null)},this.changeScore,[this.changeScore])},t}(eui.Component);egret.registerClass(Surroundings,"Surroundings");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,s){function r(e){t.call(s,e)}function n(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var Time=function(e){function t(){e.call(this),this.timeShow=new egret.TextField,this.timeS=31,this.timer=new egret.Timer(1e3,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.showTime,this),this.timer.start();var t=Main.createBitmapByName("time_png");t.x=230,t.y=144,this.addChild(t)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.showTime=function(){if(this.timeS--,this.timeShow.text=this.timeS+"",this.addChild(this.timeShow),this.timeShow.x=280,this.timeShow.y=150,this.timeShow.textColor=16420155,this.timeS<=0){var e=new GameOver;this.timer.stop(),this.parent.parent.addChild(e),this.parent.parent.removeChild(this.parent)}},t}(egret.Sprite);egret.registerClass(Time,"Time");